@model Dynamic1toMany.Models.OrderViewModel

<h2>Create Order</h2>
@using (Html.BeginForm())
{
    @Html.EditorForModel()
   
}

@*<form asp-action="Create" method="post">
        <div class="form-group">
            <label asp-for="OrderName"></label>
            <input asp-for="OrderName" class="form-control" />
            <span asp-validation-for="OrderName" class="text-danger"></span>
        </div>

        <div id="orderItems">
            @for (int i = 0; i < Model.OrderItems.Count; i++)
            {
                <div class="form-group">
                    <label asp-for="OrderItems[i].ProductName"></label>
                    <input asp-for="OrderItems[i].ProductName" class="form-control" />
                    <span asp-validation-for="OrderItems[i].ProductName" class="text-danger"></span>

                    <label asp-for="OrderItems[i].Quantity"></label>
                    <input asp-for="OrderItems[i].Quantity" class="form-control" />
                    <span asp-validation-for="OrderItems[i].Quantity" class="text-danger"></span>

                    <button type="button" onclick="removeOrderItem(this)">Remove</button>
                </div>
            }
        </div>

        <button type="button" onclick="addOrderItem()">Add Item</button>
        <button type="submit" class="btn btn-primary">Save</button>
    </form>*@

@section Scripts {
    <script>
        function addOrderItem() {
            var index = $('#orderItems .form-group').length;
            var orderItemHtml = `
                            <div class="form-group">
                                <label for="OrderItems_${index}__ProductName">Product Name</label>
                                <input name="OrderItems[${index}].ProductName" class="form-control" />
                                <label for="OrderItems_${index}__Quantity">Quantity</label>
                                <input name="OrderItems[${index}].Quantity" class="form-control" />
                                <button type="button" onclick="removeOrderItem(this)" class="btn btn-danger">Remove</button>
                            </div>`;
            $('#orderItems').append(orderItemHtml);
        }

        function removeOrderItem(button) {
            $(button).closest('.form-group').remove();
        }
    </script>
}
